###jute简介

apache jute是跨平台的序列化和反序列化工具，用于快速的产生消息体类,以及相对应的读写方法。

[Jute介绍](http://hadoop.apache.org/docs/r1.1.1/api/org/apache/hadoop/record/package-summary.html#package_description)


Jute通过javacc编译rcc.jj文件,生成RCC工具，然后通过RCC使用zookeeper.jute文件生成对应的消息体类。


####Zookeeper的Jute配置文件
`zookeeper.jute`文件中定义了各个消息类。

如定义在包`org.apache.zookeeper.data`下定义Id这个消息体，具有schema和id两个字符串属性。

	
	module org.apache.zookeeper.data {
	    class Id {
	        ustring scheme;
	        ustring id;
	    }
	}

如定义在包`org.apache.zookeeper.proto`下定义RequestHeader这个消息体，具有int类型的xid和type属性。

	module org.apache.zookeeper.proto {
	    class RequestHeader {
	        int xid;
	        int type;
	    }
	}

	
###消息体的接口Record
所有消息类都继承了接口Record。

接口Record定义了序列化和反序列化方法，

	public void serialize(OutputArchive archive, String tag)
        throws IOException;
        
    public void deserialize(InputArchive archive, String tag)
        throws IOException
        

接口InputArchive和OutputArchive分别定义了数据的读和写的方法。

jute中包含了Binary\CSV和XML的实现。

###消息体举例：RequestHeader
RequestHeader实现了 Record，用来表示消息头。

RequestHeader中有两个int字段xid和type。

type 定义在OpCode 中，如ping的值为11 ,create为1 。


RequestHeader的序列化方法：

先调用startRecord方法，然后写入两个字段后调用endRecord方法。

	a_.startRecord(this,tag);
    a_.writeInt(xid,"xid");
    a_.writeInt(type,"type");
    a_.endRecord(this,tag)
    
RequestHeader的反序列化方法：

先调用startRecord方法，然后读入两个字段后调用endRecord方法。

	a_.startRecord(tag);
    xid=a_.readInt("xid");
    type=a_.readInt("type");
    a_.endRecord(tag)
